# swg
o POST data 에 URL 항목 추가
요청: URL+데이터(json):
URL: https://{SWG-IP}:8501/approval/rule/user
데이터(json):
{ "apprid": "#######",  
"command": "ADD|DEL",
   "ruleid": RULE_ID,
   “url” : [ “URL”, …]
}

apprid: 전자결재 코드
-	영문, 숫자 와 특수문자 ‘.’, ‘-’ 허용
-	최대길이 64 byte

command: 동작
-	추가(ADD) 또는 삭제(DEL)

ruleid: 정책ID
  - '정책>사용자제어정책>정책설정' 화면에서 등록된 정책의 'EDIT' 버튼 클릭시 정책명(정책ID)로 확인 가능 
- 숫자 타입으로 "" 로 감싸지 않음
- 사전에 정책 ID (ruleid) 공유. 

url: URL 리스트
-	대소문자 구분 없이 http:// https://는 strip 처리
-	Path 부분만 url_encode 처리함
-	한글도메인에 대한 퓨니코드 변환은 처리하지 않음
-	구분자 ‘,’
-	URL 최대 길이 250 byte

### ADD/DEL - URL 테스트 샘플

ADD:
curl -k -X POST -H "Content-Type: application/json" https://172.16.202.92:8501/aproval/rule/user -d '
{"apprid": "20220214011","command": "ADD", "ruleid": 44, "url": ["*.daum.net", "www.vvv.com/avcfer?fef=cc&rgrg=ee"]}

DEL:
curl -k -X POST -H "Content-Type: application/json" https://172.16.202.92:8501/approval/rule/user -d '
{"apprid": "20220214012","command": "DEL", "ruleid": 44, "url": ["*.daum.net", "www.vvv.com/avcfer?fef=c c&rgrg=ee"]}

o 내부 프로세스:
정책 ID 미 일치:  오류 처리
정책 ID 일치:
ADD: 정책 연동된 사용자정의카테고리에 URL이 없을 경우 추가
DEL: 정책 연동된 사용자정의카테고리에 URL이 있을 경우 삭제

o 등록/삭제 에 대한 응답
 실패: http 응답코드: 4xx 또는 5xx 와 메시지
 성공: http 응답코드: 200 와 메시지
 형식: {'result': msg}

o 결재 연동 현황 (복호화제외정책):
 - 현황: 요청시간, 요청ID, 요청 내용, 성공/실패(실패사유)
 - 삭제: 보유 기간 31일 유지



---

# tipping point sms

Access to the SMS Web API requires that you authenticate by using HTTP authentication or the API key.

• HTTP authentication: –u {username}:{password}
curl -k -u {username}:{password} "https://<sms_server>/ipsProfileMgmt/
exportProfile?profileName=MyProfile"

• API key: authentication mechanism that does not require a username and password. Use the API key as
part of the header for HTTP requests. X-SMS-API-KEY: <string>
curl -k --header "X-SMS-API-KEY: <string>" "https://<sms_server>/ipsProfileMgmt/
exportProfile?profileName=MyProfile"


Errors
The SMS web API returns one of the following HTTP status codes if the request is unsuccessful.
Code Description
400 Bad request – malformed parameter or request.
401 Unauthorized – missing or incorrect credentials.
403 No web access capability.
If you receive this message, check the user role capabilities, and enable the Access SMS Web Services capability.
On the SMS, go to Admin > Authentication and Authorization > Roles > Edit > Capabilities > Admin > Access SMS Web
Services.
404 Not found – invalid or nonexistent requested source.
412 Preconditioned fail – unexpected error. Check the SMS System Log.
On the SMS, go to Admin > General > SMS System Log.
500 Internal server error – server-side exception. Check the SMS System Log.
On the SMS, go to Admin > General > SMS System Log.


Get current filter settings
Retrieve current filter settings for a profile. The Current Filter Settings Request is a POST request, and
requires you to provide an XML file that identifies the profile and the filter(s). When the SMS receives a
current filter settings service request, it:
• Validates the filter ID using the DV metadata.

Example
curl -X POST -k --header "X-SMS-API-KEY: <string>" --form name=@getFilters.xml
https://<sms_server>/ipsProfileMgmt/getFilters
The following sample shows how the getFilters XML file is composed according to the schema. You must
provide values for the profile name and at least one of the filter search terms: number, signature ID, policy
ID, or name.


---

# trellix
`curl -qgsSk --header "FeApi-Token: xxxxxxxxxxxxxxxxxxxxxxxxx=" --header "Accept:application/zip" https://
xxx.xxx.xxx.xxx/wsapis/v2.0.0/artifacts/dce3d3d0-c362-4780-8c16-cc44ab776XXX -o file.zip`


IJhiv+mOEB2myDwOHQkaLBfc0w/AP7wCTaxobeqdBvOXBQ=

900889ec-d60e-49e7-bb48-007699d1
